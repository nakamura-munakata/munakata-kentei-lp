<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宗像検定 課長コース | 宗像の魅力を再発見</title>
    <meta name="description" content="宗像検定「課長コース」に挑戦！基本情報を楽しく学んで、宗像の魅力を再発見しよう。">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz.css">
    <style>
        /* Quiz Specific Overrides */
        .result-icon {
            display: inline-flex;
            width: 24px;
            height: 24px;
            background: var(--navy);
            color: white;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            margin-right: 8px;
        }

        .result-icon.success {
            background: var(--vermilion);
        }

        .review-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 12px;
            margin-right: 8px;
        }

        .review-icon.correct {
            background: var(--navy);
        }

        .review-icon.incorrect {
            background: #e74c3c;
        }

        .exam-section {
            display: none;
        }

        .exam-section.active {
            display: block;
        }

        #course-intro.hidden {
            display: none;
        }

        #result-section {
            display: none;
        }

        #result-section.active {
            display: block;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <img src="../images/logo_mark.svg" onerror="this.style.display='none'" alt=""> 宗像検定
            </a>
            <ul class="nav-links">
                <li><a href="../index.html#concept">検定とは</a></li>
                <li><a href="../index.html#courses">コース紹介</a></li>
                <li><a href="../kanko/index.html">観光編</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>宗像検定<br>課長コース</h1>
            <p>まずはここからスタート！<br>宗像の基本情報を楽しく学びましょう。</p>
        </div>
    </section>

    <div class="container">
        <!-- コース紹介（課長コース専用） -->
        <div id="course-intro">
            <div class="difficulty-card beginner"
                style="cursor:default; transform:none; max-width:600px; margin:0 auto;">
                <img src="../images/course_kacho.webp" alt="課長コース" class="difficulty-icon"
                    style="width:120px; height:120px;" onerror="this.style.backgroundColor='#ccc'">
                <h3 style="font-size:1.8rem; margin-bottom:1rem;">課長コース</h3>
                <p style="margin-bottom:1.5rem;">宗像の歴史・自然・文化などの基礎知識を問う全11問。<br>合格して「課長」の称号をゲットしよう！</p>

                <ul
                    style="list-style:none; padding:0; margin-bottom:2rem; background:var(--off-white); padding:1rem; border-radius:8px; text-align:left;">
                    <li class="mb-1">✅ 問題数: 選択式 11問</li>
                    <li class="mb-1">✅ 合格ライン: 60点以上</li>
                    <li>✅ 制限時間: なし</li>
                </ul>

                <button class="cta-button" onclick="startExam('beginner')"
                    style="font-size:1.2rem; padding:1.2rem 3rem;">検定スタート</button>
            </div>
        </div>

        <!-- 課長コース試験セクション -->
        <div id="beginner-exam" class="exam-section">
            <h2 class="section-title">課長コース 試験中</h2>
            <div id="beginner-questions"></div>
            <div class="text-center mt-4">
                <button class="cta-button" onclick="submitAnswers('beginner')">採点する</button>
            </div>
        </div>

        <!-- 結果表示 -->
        <div id="result-section">
            <div class="difficulty-card" style="cursor:default; transform:none;">
                <h2 style="font-family:'Noto Serif JP'; margin-bottom:1rem;">試験結果</h2>
                <div id="result-message" style="font-size:1.2rem; font-weight:bold; margin-bottom:1rem;"></div>
                <div id="result-score" style="font-size:3rem; color:var(--vermilion); font-weight:bold;"></div>
                <div id="result-rank" style="color:var(--text-light);"></div>

                <div id="certificate-container" style="margin-top:2rem; display:none;">
                    <button class="cta-button" style="background:#4CAF50; margin-bottom:2rem;"
                        onclick="location.href='../kanko/index.html'">観光編にも挑戦！</button>

                    <div style="border:4px double var(--gold); padding:2rem; border-radius:8px; background:#fffcf5;">
                        <h3 style="color:var(--gold);">MUNAKATA KENTEI</h3>
                        <div id="certificate-badge-img" style="width:100px; height:100px; margin:1rem auto;"></div>
                        <div style="font-size:1.5rem; font-weight:bold; margin:0.5rem 0;">デジタル認定証</div>
                        <div id="certificate-level-name"></div>
                        <div style="margin-top:1rem; font-size:0.9rem; color:#888;" id="certificate-date"></div>
                    </div>
                </div>

                <div style="margin-top:2rem;">
                    <button class="cta-button" onclick="retryExam()">もう一度挑戦する</button>
                </div>
            </div>

            <div id="answer-review" style="margin-top:3rem;">
                <h3 style="border-bottom:2px solid var(--light-gray); padding-bottom:0.5rem;">回答確認</h3>
                <div id="review-content"></div>
            </div>
        </div>

    </div>

    <!-- JavaScript Logic -->
    <script>
        // 問題データ (課長コースのみ使用)
        const allQuestions = {
            "beginner": [
                { "id": "q1", "question": "福岡市と北九州市の中間に位置する宗像市。北側はどの海に面しているでしょうか？", "options": ["有明海", "玄界灘", "瀬戸内海"], "correct": 1, "explanation": "宗像市は玄界灘に面しており、この海は古代から大陸との交易の重要な航路でした。" },
                { "id": "q2", "question": "平成29年（2017年）にユネスコ世界文化遺産に登録された遺産群の名称は、「『〇〇〇島』宗像・沖ノ島と関連遺産群」です。〇に入る言葉は？", "options": ["宝の", "神宿る", "祈りの"], "correct": 1, "explanation": "正式名称は「『神宿る島』宗像・沖ノ島と関連遺産群」で、沖ノ島は神聖な島として崇められてきました。" },
                { "id": "q3", "question": "宗像市出身の実業家で、出光興産の創業者であり、小説『海賊とよばれた男』のモデルとしても知られる人物は誰でしょうか？", "options": ["出光佐三", "松下幸之助", "渋沢栄一"], "correct": 0, "explanation": "出光佐三は宗像市出身の実業家で、出光興産を創業し、その波乱万丈な人生は小説『海賊とよばれた男』のモデルとなりました。" },
                { "id": "q4", "question": "宗像市の「市の木」の一つで、市内の文化施設「宗像ユリックス」の名前の由来にもなっている木は何でしょうか？", "options": ["スギ", "マツ", "クスノキ"], "correct": 2, "explanation": "クスノキは宗像市の市の木の一つで、「ユリックス」の名前は「ユリ」（市の花）と「クス」（クスノキ）から名付けられました。" },
                { "id": "q5", "question": "宗像市の「市の魚」に制定されており、市内では「玄ちゃん」の愛称でも親しまれている魚は何でしょうか？", "options": ["マアジ", "タイ", "イカ"], "correct": 0, "explanation": "マアジが宗像市の市の魚で、玄界灘で獲れることから「玄ちゃん」という愛称で親しまれています。" },
                { "id": "q6", "question": "宗像市の「市の花」で、市が自生の北限とされているユリの名前は何でしょうか？", "options": ["テッポウユリ", "カノコユリ", "ヤマユリ"], "correct": 1, "explanation": "カノコユリは宗像市の市の花で、宗像市がこのユリの自生の北限地とされています。" },
                { "id": "q7", "question": "宗像大社が祀っている神様は、「宗像〇女神」と呼ばれています。数字の〇に入るのは？", "options": ["三", "五", "七"], "correct": 0, "explanation": "宗像大社は「宗像三女神」を祀っており、これらの女神は古代日本で重要な信仰対象でした。" },
                { "id": "q8", "question": "宗像市にあるJR鹿児島本線の主要駅で、市役所の最寄り駅（バス利用）でもある駅はどこでしょうか？", "options": ["赤間駅", "東郷駅", "教育大前駅"], "correct": 0, "explanation": "赤間駅はJR鹿児島本線の主要駅で、宗像市役所の最寄り駅です。" },
                { "id": "q9", "question": "宗像市で最も標高が高い山（499.0メートル）の名前は何でしょうか？", "options": ["城山", "孔大寺山", "許斐山"], "correct": 1, "explanation": "孔大寺山が宗像市で最も標高が高い山で、499.0メートルです。" },
                { "id": "q10", "question": "世界遺産の構成資産の一つで、海を隔てて沖ノ島を拝むために大島に作られた場所を何というでしょうか？", "options": ["沖津宮遥拝所", "中津宮", "辺津宮"], "correct": 0, "explanation": "沖津宮遥拝所は大島に作られた場所で、沖ノ島を拝むために造営されました。" },
                { "id": "q11", "question": "令7年12月、宗像ユリックス内に開業した、株式会社くりえいとが関わる「全天候型こども広場」の愛称は何でしょうか？", "options": ["Mu-Mo（ムーモ）", "Aso-Bo（アソボ）", "Muna-Kids（ムナキッズ）"], "correct": 0, "explanation": "令7年12月に宗像ユリックス内に開業した全天候型こども広場の愛称はMu-Mo（ムーモ）です。" }
            ]
        };

        let currentScore = 0;

        function startExam(difficulty) {
            document.getElementById('course-intro').classList.add('hidden');
            document.getElementById('beginner-exam').classList.add('active');
            renderQuestions(difficulty);
            window.scrollTo(0, 0);
        }

        function renderQuestions(difficulty) {
            const questions = allQuestions[difficulty];
            const container = document.getElementById(difficulty + '-questions');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const questionHTML = `
                    <div style="background:white; padding:1.5rem; border-radius:12px; margin-bottom:1.5rem; box-shadow:var(--shadow-sm);">
                        <div style="font-weight:bold; color:var(--text-light); margin-bottom:0.5rem;">第${idx + 1}問</div>
                        <div style="font-size:1.1rem; margin-bottom:1rem; font-weight:500;">${q.question}</div>
                        <div style="display:flex; flex-direction:column; gap:0.75rem;">
                            ${q.options.map((opt, optIdx) => `
                                <label style="display:flex; align-items:center; background:var(--off-white); padding:1rem; border-radius:8px; cursor:pointer;">
                                    <input type="radio" name="${q.id}" value="${optIdx}" style="margin-right:1rem;">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += questionHTML;
            });
        }

        function submitAnswers(difficulty) {
            const questions = allQuestions[difficulty];
            let score = 0;
            let answers = {};
            let isAllAnswered = true;

            questions.forEach(q => {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`);
                if (selected) {
                    const answer = parseInt(selected.value);
                    answers[q.id] = {
                        selected: answer,
                        correct: q.correct,
                        isCorrect: answer === q.correct,
                        question: q.question,
                        options: q.options,
                        explanation: q.explanation
                    };
                    if (answer === q.correct) {
                        const pointsPerQuestion = difficulty === 'beginner' ? Math.round(100 / 11 * 100) / 100 : 10;
                        score += pointsPerQuestion;
                    }
                } else {
                    isAllAnswered = false;
                    answers[q.id] = { selected: -1, correct: q.correct, isCorrect: false, question: q.question, options: q.options, explanation: q.explanation };
                }
            });

            if (!isAllAnswered) {
                if (!confirm('未回答の問題があります。採点してもよろしいですか？')) return;
            }

            currentScore = Math.round(score);
            displayResults(currentScore, difficulty, answers);
        }

        function displayResults(score, difficulty, answers) {
            document.getElementById(difficulty + '-exam').classList.remove('active');
            document.getElementById('result-section').classList.add('active');
            document.getElementById('result-score').textContent = score + '点';

            let message = '';
            let rank = '';
            const isPassed = score >= 60;

            if (score >= 80) {
                message = '<span class="result-icon success">★</span> 素晴らしい成績です！';
                rank = '評価: 優秀（80点以上）';
            } else if (score >= 60) {
                message = '<span class="result-icon success">✓</span> 良好な成績です！';
                rank = '評価: 合格（60点以上）';
            } else {
                message = '<span class="result-icon">!</span> もう一度チャレンジしてみましょう！';
                rank = '評価: 再受検推奨（60点未満）';
            }

            document.getElementById('result-message').innerHTML = message;
            document.getElementById('result-rank').textContent = rank;

            if (isPassed) {
                document.getElementById('certificate-container').style.display = 'block';
                document.getElementById('certificate-level-name').textContent = '課長コース';

                const today = new Date();
                document.getElementById('certificate-date').textContent = `${today.getFullYear()}年${today.getMonth() + 1}月${today.getDate()}日`;

                document.getElementById('certificate-badge-img').innerHTML = `<img src="../images/course_kacho.webp" style="width:100%;height:100%;object-fit:cover;border-radius:50%">`;
            } else {
                document.getElementById('certificate-container').style.display = 'none';
            }

            // 解説表示
            const reviewDiv = document.getElementById('review-content');
            reviewDiv.innerHTML = '';
            Object.values(answers).forEach((ans, idx) => {
                const icon = ans.isCorrect ? '<span class="review-icon correct">✓</span>' : '<span class="review-icon incorrect">✕</span>';
                const html = `
                    <div style="background:white; padding:1rem; border-radius:8px; margin-bottom:1rem; border-left:4px solid ${ans.isCorrect ? 'var(--cf-green)' : 'var(--vermilion)'}">
                        <div style="font-weight:bold; margin-bottom:0.5rem;">${icon} 第${idx + 1}問: ${ans.question}</div>
                        <div style="font-size:0.9rem; color:#555; margin-bottom:0.5rem;">あなたの回答: ${ans.selected >= 0 ? ans.options[ans.selected] : '未回答'} / 正解: ${ans.options[ans.correct]}</div>
                        <div style="font-size:0.9rem; background:var(--off-white); padding:0.5rem; border-radius:4px;">解説: ${ans.explanation}</div>
                    </div>
                `;
                reviewDiv.innerHTML += html;
            });
            window.scrollTo(0, 0);
        }

        function retryExam() {
            document.getElementById('result-section').classList.remove('active');
            document.getElementById('course-intro').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        // URLパラメータの処理 (自動スタート)
        window.addEventListener('load', function () {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('course') === 'beginner') {
                startExam('beginner');
            }
        });
    </script>
</body>

</html>