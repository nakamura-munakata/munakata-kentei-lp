<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®—åƒæ¤œå®š èª²é•·ã‚³ãƒ¼ã‚¹ | å®—åƒã®é­…åŠ›ã‚’å†ç™ºè¦‹</title>
    <meta name="description" content="å®—åƒæ¤œå®šã€Œèª²é•·ã‚³ãƒ¼ã‚¹ã€ã«æŒ‘æˆ¦ï¼åŸºæœ¬æƒ…å ±ã‚’æ¥½ã—ãå­¦ã‚“ã§ã€å®—åƒã®é­…åŠ›ã‚’å†ç™ºè¦‹ã—ã‚ˆã†ã€‚">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz.css">
    <style>
        /* Quiz Specific Overrides */
        .result-icon {
            display: inline-flex;
            width: 24px;
            height: 24px;
            background: var(--navy);
            color: white;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            margin-right: 8px;
        }

        .result-icon.success {
            background: var(--vermilion);
        }

        .review-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            font-size: 12px;
            margin-right: 8px;
        }

        .review-icon.correct {
            background: var(--navy);
        }

        .review-icon.incorrect {
            background: #e74c3c;
        }

        .exam-section {
            display: none;
        }

        .exam-section.active {
            display: block;
        }

        #course-intro.hidden {
            display: none;
        }

        #result-section {
            display: none;
        }

        #result-section.active {
            display: block;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <img src="../images/logo_mark.svg" onerror="this.style.display='none'" alt=""> å®—åƒæ¤œå®š
            </a>
            <ul class="nav-links">
                <li><a href="../index.html#concept">æ¤œå®šã¨ã¯</a></li>
                <li><a href="../index.html#courses">ã‚³ãƒ¼ã‚¹ç´¹ä»‹</a></li>
                <li><a href="../kanko/index.html">è¦³å…‰ç·¨</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>å®—åƒæ¤œå®š<br>èª²é•·ã‚³ãƒ¼ã‚¹</h1>
            <p>ã¾ãšã¯ã“ã“ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆï¼<br>å®—åƒã®åŸºæœ¬æƒ…å ±ã‚’æ¥½ã—ãå­¦ã³ã¾ã—ã‚‡ã†ã€‚</p>
        </div>
    </section>

    <div class="container">
        <!-- ã‚³ãƒ¼ã‚¹ç´¹ä»‹ï¼ˆèª²é•·ã‚³ãƒ¼ã‚¹å°‚ç”¨ï¼‰ -->
        <div id="course-intro">
            <div class="difficulty-card beginner"
                style="cursor:default; transform:none; max-width:600px; margin:0 auto;">
                <img src="../images/course_kacho.webp" alt="èª²é•·ã‚³ãƒ¼ã‚¹" class="difficulty-icon"
                    style="width:240px; height:240px;" onerror="this.style.backgroundColor='#ccc'">
                <h3 style="font-size:1.8rem; margin-bottom:1rem;">èª²é•·ã‚³ãƒ¼ã‚¹</h3>

                <p style="margin-bottom:1.5rem; text-align:left; line-height:1.8;">
                    <strong>ã€ŒçŸ¥ã‚Œã°èª°ã‹ã«è©±ã—ãŸããªã‚‹ã€å®—åƒã®é­…åŠ›ã€‚</strong><br>
                    ä¸–ç•Œéºç”£ã€Œæ²–ãƒå³¶ã€ã®ç¥ç§˜ã‹ã‚‰ã€åœ°å…ƒã§æ„›ã•ã‚Œã‚‹çµ¶å“ã‚°ãƒ«ãƒ¡ã¾ã§ã€‚<br>
                    çŸ¥ã£ã¦ã„ã‚‹ã‚ˆã†ã§çŸ¥ã‚‰ãªã„å®—åƒã®ãƒˆãƒªãƒ“ã‚¢ã‚’ã€ã‚¯ã‚¤ã‚ºå½¢å¼ã§æ¥½ã—ãå­¦ã³ã¾ã›ã‚“ã‹ï¼Ÿ
                </p>

                <div
                    style="background:var(--off-white); padding:1.5rem; border-radius:12px; margin-bottom:2rem; text-align:left;">
                    <ul style="list-style:none; padding:0; margin:0;">
                        <li class="mb-2" style="display:flex; align-items:center; font-weight:bold;">
                            <span style="font-size:1.2rem; margin-right:0.5rem;">â±ï¸</span> æ‰€è¦æ™‚é–“ï¼šç´„3åˆ†ï¼ˆã‚µã‚¯ãƒƒã¨æŒ‘æˆ¦ï¼ï¼‰
                        </li>
                        <li class="mb-2" style="display:flex; align-items:center; font-weight:bold;">
                            <span style="font-size:1.2rem; margin-right:0.5rem;">ğŸ†“</span> å®Œå…¨ç„¡æ–™ãƒ»ç™»éŒ²ä¸è¦
                        </li>
                        <li class="mb-2" style="display:flex; align-items:center; font-weight:bold;">
                            <span style="font-size:1.2rem; margin-right:0.5rem;">ğŸ†</span> åˆæ ¼ã§ã€Œãƒ‡ã‚¸ã‚¿ãƒ«èªå®šè¨¼ã€ç™ºè¡Œ
                        </li>
                        <li style="display:flex; align-items:center; font-weight:bold;">
                            <span style="font-size:1.2rem; margin-right:0.5rem;">âœ…</span> åˆæ ¼ãƒ©ã‚¤ãƒ³ï¼šå…¨11å•ä¸­ 60ç‚¹ä»¥ä¸Š
                        </li>
                    </ul>
                </div>

                <button class="cta-button" onclick="startExam('beginner')"
                    style="font-size:1.2rem; padding:1.2rem 3rem; width:100%; max-width:400px; box-shadow:0 4px 12px rgba(216, 67, 21, 0.4);">
                    æ¤œå®šã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹
                </button>
            </div>
        </div>

        <!-- èª²é•·ã‚³ãƒ¼ã‚¹è©¦é¨“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="beginner-exam" class="exam-section">
            <h2 class="section-title">èª²é•·ã‚³ãƒ¼ã‚¹ è©¦é¨“ä¸­</h2>
            <div id="beginner-questions"></div>
            <div class="text-center mt-4">
                <button class="cta-button" onclick="submitAnswers('beginner')">æ¡ç‚¹ã™ã‚‹</button>
            </div>
        </div>

        <!-- çµæœè¡¨ç¤º -->
        <div id="result-section">
            <div class="difficulty-card" style="cursor:default; transform:none;">
                <h2 style="font-family:'Noto Serif JP'; margin-bottom:1rem;">è©¦é¨“çµæœ</h2>
                <div id="result-message" style="font-size:1.2rem; font-weight:bold; margin-bottom:1rem;"></div>
                <div id="result-score" style="font-size:3rem; color:var(--vermilion); font-weight:bold;"></div>
                <div id="result-rank" style="color:var(--text-light);"></div>

                <div id="certificate-container" style="margin-top:2rem; display:none;">
                    <button class="cta-button" style="background:#4CAF50; margin-bottom:2rem;"
                        onclick="location.href='../kanko/index.html'">è¦³å…‰ç·¨ã«ã‚‚æŒ‘æˆ¦ï¼</button>

                    <div style="border:4px double var(--gold); padding:2rem; border-radius:8px; background:#fffcf5;">
                        <h3 style="color:var(--gold);">MUNAKATA KENTEI</h3>
                        <div id="certificate-badge-img" style="width:100px; height:100px; margin:1rem auto;"></div>
                        <div style="font-size:1.5rem; font-weight:bold; margin:0.5rem 0;">ãƒ‡ã‚¸ã‚¿ãƒ«èªå®šè¨¼</div>
                        <div id="certificate-level-name"></div>
                        <div style="margin-top:1rem; font-size:0.9rem; color:#888;" id="certificate-date"></div>
                    </div>
                </div>

                <div style="margin-top:2rem;">
                    <button class="cta-button" onclick="retryExam()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
                </div>
            </div>

            <div id="answer-review" style="margin-top:3rem;">
                <h3 style="border-bottom:2px solid var(--light-gray); padding-bottom:0.5rem;">å›ç­”ç¢ºèª</h3>
                <div id="review-content"></div>
            </div>
        </div>

    </div>

    <!-- JavaScript Logic -->
    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿ (èª²é•·ã‚³ãƒ¼ã‚¹ã®ã¿ä½¿ç”¨)
        const allQuestions = {
            "beginner": [
                { "id": "q1", "question": "ç¦å²¡å¸‚ã¨åŒ—ä¹å·å¸‚ã®ä¸­é–“ã«ä½ç½®ã™ã‚‹å®—åƒå¸‚ã€‚åŒ—å´ã¯ã©ã®æµ·ã«é¢ã—ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["æœ‰æ˜æµ·", "ç„ç•Œç˜", "ç€¬æˆ¸å†…æµ·"], "correct": 1, "explanation": "å®—åƒå¸‚ã¯ç„ç•Œç˜ã«é¢ã—ã¦ãŠã‚Šã€ã“ã®æµ·ã¯å¤ä»£ã‹ã‚‰å¤§é™¸ã¨ã®äº¤æ˜“ã®é‡è¦ãªèˆªè·¯ã§ã—ãŸã€‚" },
                { "id": "q2", "question": "å¹³æˆ29å¹´ï¼ˆ2017å¹´ï¼‰ã«ãƒ¦ãƒã‚¹ã‚³ä¸–ç•Œæ–‡åŒ–éºç”£ã«ç™»éŒ²ã•ã‚ŒãŸéºç”£ç¾¤ã®åç§°ã¯ã€ã€Œã€ã€‡ã€‡ã€‡å³¶ã€å®—åƒãƒ»æ²–ãƒå³¶ã¨é–¢é€£éºç”£ç¾¤ã€ã§ã™ã€‚ã€‡ã«å…¥ã‚‹è¨€è‘‰ã¯ï¼Ÿ", "options": ["å®ã®", "ç¥å®¿ã‚‹", "ç¥ˆã‚Šã®"], "correct": 1, "explanation": "æ­£å¼åç§°ã¯ã€Œã€ç¥å®¿ã‚‹å³¶ã€å®—åƒãƒ»æ²–ãƒå³¶ã¨é–¢é€£éºç”£ç¾¤ã€ã§ã€æ²–ãƒå³¶ã¯ç¥è–ãªå³¶ã¨ã—ã¦å´‡ã‚ã‚‰ã‚Œã¦ãã¾ã—ãŸã€‚" },
                { "id": "q3", "question": "å®—åƒå¸‚å‡ºèº«ã®å®Ÿæ¥­å®¶ã§ã€å‡ºå…‰èˆˆç”£ã®å‰µæ¥­è€…ã§ã‚ã‚Šã€å°èª¬ã€æµ·è³Šã¨ã‚ˆã°ã‚ŒãŸç”·ã€ã®ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã‚‹äººç‰©ã¯èª°ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["å‡ºå…‰ä½ä¸‰", "æ¾ä¸‹å¹¸ä¹‹åŠ©", "æ¸‹æ²¢æ „ä¸€"], "correct": 0, "explanation": "å‡ºå…‰ä½ä¸‰ã¯å®—åƒå¸‚å‡ºèº«ã®å®Ÿæ¥­å®¶ã§ã€å‡ºå…‰èˆˆç”£ã‚’å‰µæ¥­ã—ã€ãã®æ³¢ä¹±ä¸‡ä¸ˆãªäººç”Ÿã¯å°èª¬ã€æµ·è³Šã¨ã‚ˆã°ã‚ŒãŸç”·ã€ã®ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚Šã¾ã—ãŸã€‚" },
                { "id": "q4", "question": "å®—åƒå¸‚ã®ã€Œå¸‚ã®æœ¨ã€ã®ä¸€ã¤ã§ã€å¸‚å†…ã®æ–‡åŒ–æ–½è¨­ã€Œå®—åƒãƒ¦ãƒªãƒƒã‚¯ã‚¹ã€ã®åå‰ã®ç”±æ¥ã«ã‚‚ãªã£ã¦ã„ã‚‹æœ¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["ã‚¹ã‚®", "ãƒãƒ„", "ã‚¯ã‚¹ãƒã‚­"], "correct": 2, "explanation": "ã‚¯ã‚¹ãƒã‚­ã¯å®—åƒå¸‚ã®å¸‚ã®æœ¨ã®ä¸€ã¤ã§ã€ã€Œãƒ¦ãƒªãƒƒã‚¯ã‚¹ã€ã®åå‰ã¯ã€Œãƒ¦ãƒªã€ï¼ˆå¸‚ã®èŠ±ï¼‰ã¨ã€Œã‚¯ã‚¹ã€ï¼ˆã‚¯ã‚¹ãƒã‚­ï¼‰ã‹ã‚‰åä»˜ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚" },
                { "id": "q5", "question": "å®—åƒå¸‚ã®ã€Œå¸‚ã®é­šã€ã«åˆ¶å®šã•ã‚Œã¦ãŠã‚Šã€å¸‚å†…ã§ã¯ã€Œç„ã¡ã‚ƒã‚“ã€ã®æ„›ç§°ã§ã‚‚è¦ªã—ã¾ã‚Œã¦ã„ã‚‹é­šã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["ãƒã‚¢ã‚¸", "ã‚¿ã‚¤", "ã‚¤ã‚«"], "correct": 0, "explanation": "ãƒã‚¢ã‚¸ãŒå®—åƒå¸‚ã®å¸‚ã®é­šã§ã€ç„ç•Œç˜ã§ç²ã‚Œã‚‹ã“ã¨ã‹ã‚‰ã€Œç„ã¡ã‚ƒã‚“ã€ã¨ã„ã†æ„›ç§°ã§è¦ªã—ã¾ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q6", "question": "å®—åƒå¸‚ã®ã€Œå¸‚ã®èŠ±ã€ã§ã€å¸‚ãŒè‡ªç”Ÿã®åŒ—é™ã¨ã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒªã®åå‰ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["ãƒ†ãƒƒãƒã‚¦ãƒ¦ãƒª", "ã‚«ãƒã‚³ãƒ¦ãƒª", "ãƒ¤ãƒãƒ¦ãƒª"], "correct": 1, "explanation": "ã‚«ãƒã‚³ãƒ¦ãƒªã¯å®—åƒå¸‚ã®å¸‚ã®èŠ±ã§ã€å®—åƒå¸‚ãŒã“ã®ãƒ¦ãƒªã®è‡ªç”Ÿã®åŒ—é™åœ°ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q7", "question": "å®—åƒå¤§ç¤¾ãŒç¥€ã£ã¦ã„ã‚‹ç¥æ§˜ã¯ã€ã€Œå®—åƒã€‡å¥³ç¥ã€ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚æ•°å­—ã®ã€‡ã«å…¥ã‚‹ã®ã¯ï¼Ÿ", "options": ["ä¸‰", "äº”", "ä¸ƒ"], "correct": 0, "explanation": "å®—åƒå¤§ç¤¾ã¯ã€Œå®—åƒä¸‰å¥³ç¥ã€ã‚’ç¥€ã£ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã®å¥³ç¥ã¯å¤ä»£æ—¥æœ¬ã§é‡è¦ãªä¿¡ä»°å¯¾è±¡ã§ã—ãŸã€‚" },
                { "id": "q8", "question": "å®—åƒå¸‚ã«ã‚ã‚‹JRé¹¿å…å³¶æœ¬ç·šã®ä¸»è¦é§…ã§ã€å¸‚å½¹æ‰€ã®æœ€å¯„ã‚Šé§…ï¼ˆãƒã‚¹åˆ©ç”¨ï¼‰ã§ã‚‚ã‚ã‚‹é§…ã¯ã©ã“ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["èµ¤é–“é§…", "æ±éƒ·é§…", "æ•™è‚²å¤§å‰é§…"], "correct": 0, "explanation": "èµ¤é–“é§…ã¯JRé¹¿å…å³¶æœ¬ç·šã®ä¸»è¦é§…ã§ã€å®—åƒå¸‚å½¹æ‰€ã®æœ€å¯„ã‚Šé§…ã§ã™ã€‚" },
                { "id": "q9", "question": "å®—åƒå¸‚ã§æœ€ã‚‚æ¨™é«˜ãŒé«˜ã„å±±ï¼ˆ499.0ãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ã®åå‰ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["åŸå±±", "å­”å¤§å¯ºå±±", "è¨±æ–å±±"], "correct": 1, "explanation": "å­”å¤§å¯ºå±±ãŒå®—åƒå¸‚ã§æœ€ã‚‚æ¨™é«˜ãŒé«˜ã„å±±ã§ã€499.0ãƒ¡ãƒ¼ãƒˆãƒ«ã§ã™ã€‚" },
                { "id": "q10", "question": "ä¸–ç•Œéºç”£ã®æ§‹æˆè³‡ç”£ã®ä¸€ã¤ã§ã€æµ·ã‚’éš”ã¦ã¦æ²–ãƒå³¶ã‚’æ‹ã‚€ãŸã‚ã«å¤§å³¶ã«ä½œã‚‰ã‚ŒãŸå ´æ‰€ã‚’ä½•ã¨ã„ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["æ²–æ´¥å®®é¥æ‹æ‰€", "ä¸­æ´¥å®®", "è¾ºæ´¥å®®"], "correct": 0, "explanation": "æ²–æ´¥å®®é¥æ‹æ‰€ã¯å¤§å³¶ã«ä½œã‚‰ã‚ŒãŸå ´æ‰€ã§ã€æ²–ãƒå³¶ã‚’æ‹ã‚€ãŸã‚ã«é€ å–¶ã•ã‚Œã¾ã—ãŸã€‚" },
                { "id": "q11", "question": "ä»¤7å¹´12æœˆã€å®—åƒãƒ¦ãƒªãƒƒã‚¯ã‚¹å†…ã«é–‹æ¥­ã—ãŸã€æ ªå¼ä¼šç¤¾ãã‚Šãˆã„ã¨ãŒé–¢ã‚ã‚‹ã€Œå…¨å¤©å€™å‹ã“ã©ã‚‚åºƒå ´ã€ã®æ„›ç§°ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ", "options": ["Mu-Moï¼ˆãƒ ãƒ¼ãƒ¢ï¼‰", "Aso-Boï¼ˆã‚¢ã‚½ãƒœï¼‰", "Muna-Kidsï¼ˆãƒ ãƒŠã‚­ãƒƒã‚ºï¼‰"], "correct": 0, "explanation": "ä»¤7å¹´12æœˆã«å®—åƒãƒ¦ãƒªãƒƒã‚¯ã‚¹å†…ã«é–‹æ¥­ã—ãŸå…¨å¤©å€™å‹ã“ã©ã‚‚åºƒå ´ã®æ„›ç§°ã¯Mu-Moï¼ˆãƒ ãƒ¼ãƒ¢ï¼‰ã§ã™ã€‚" }
            ]
        };

        let currentScore = 0;

        function startExam(difficulty) {
            document.getElementById('course-intro').classList.add('hidden');
            document.getElementById('beginner-exam').classList.add('active');
            renderQuestions(difficulty);
            window.scrollTo(0, 0);
        }

        function renderQuestions(difficulty) {
            const questions = allQuestions[difficulty];
            const container = document.getElementById(difficulty + '-questions');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const questionHTML = `
                    <div style="background:white; padding:1.5rem; border-radius:12px; margin-bottom:1.5rem; box-shadow:var(--shadow-sm);">
                        <div style="font-weight:bold; color:var(--text-light); margin-bottom:0.5rem;">ç¬¬${idx + 1}å•</div>
                        <div style="font-size:1.1rem; margin-bottom:1rem; font-weight:500;">${q.question}</div>
                        <div style="display:flex; flex-direction:column; gap:0.75rem;">
                            ${q.options.map((opt, optIdx) => `
                                <label style="display:flex; align-items:center; background:var(--off-white); padding:1rem; border-radius:8px; cursor:pointer;">
                                    <input type="radio" name="${q.id}" value="${optIdx}" style="margin-right:1rem;">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += questionHTML;
            });
        }

        function submitAnswers(difficulty) {
            const questions = allQuestions[difficulty];
            let score = 0;
            let answers = {};
            let isAllAnswered = true;

            questions.forEach(q => {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`);
                if (selected) {
                    const answer = parseInt(selected.value);
                    answers[q.id] = {
                        selected: answer,
                        correct: q.correct,
                        isCorrect: answer === q.correct,
                        question: q.question,
                        options: q.options,
                        explanation: q.explanation
                    };
                    if (answer === q.correct) {
                        const pointsPerQuestion = difficulty === 'beginner' ? Math.round(100 / 11 * 100) / 100 : 10;
                        score += pointsPerQuestion;
                    }
                } else {
                    isAllAnswered = false;
                    answers[q.id] = { selected: -1, correct: q.correct, isCorrect: false, question: q.question, options: q.options, explanation: q.explanation };
                }
            });

            if (!isAllAnswered) {
                if (!confirm('æœªå›ç­”ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚æ¡ç‚¹ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;
            }

            currentScore = Math.round(score);
            displayResults(currentScore, difficulty, answers);
        }

        function displayResults(score, difficulty, answers) {
            document.getElementById(difficulty + '-exam').classList.remove('active');
            document.getElementById('result-section').classList.add('active');
            document.getElementById('result-score').textContent = score + 'ç‚¹';

            let message = '';
            let rank = '';
            const isPassed = score >= 60;

            if (score >= 80) {
                message = '<span class="result-icon success">â˜…</span> ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼';
                rank = 'è©•ä¾¡: å„ªç§€ï¼ˆ80ç‚¹ä»¥ä¸Šï¼‰';
            } else if (score >= 60) {
                message = '<span class="result-icon success">âœ“</span> è‰¯å¥½ãªæˆç¸¾ã§ã™ï¼';
                rank = 'è©•ä¾¡: åˆæ ¼ï¼ˆ60ç‚¹ä»¥ä¸Šï¼‰';
            } else {
                message = '<span class="result-icon">!</span> ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼';
                rank = 'è©•ä¾¡: å†å—æ¤œæ¨å¥¨ï¼ˆ60ç‚¹æœªæº€ï¼‰';
            }

            document.getElementById('result-message').innerHTML = message;
            document.getElementById('result-rank').textContent = rank;

            if (isPassed) {
                document.getElementById('certificate-container').style.display = 'block';
                document.getElementById('certificate-level-name').textContent = 'èª²é•·ã‚³ãƒ¼ã‚¹';

                const today = new Date();
                document.getElementById('certificate-date').textContent = `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥`;

                document.getElementById('certificate-badge-img').innerHTML = `<img src="../images/course_kacho.webp" style="width:100%;height:100%;object-fit:cover;border-radius:50%">`;
            } else {
                document.getElementById('certificate-container').style.display = 'none';
            }

            // è§£èª¬è¡¨ç¤º
            const reviewDiv = document.getElementById('review-content');
            reviewDiv.innerHTML = '';
            Object.values(answers).forEach((ans, idx) => {
                const icon = ans.isCorrect ? '<span class="review-icon correct">âœ“</span>' : '<span class="review-icon incorrect">âœ•</span>';
                const html = `
                    <div style="background:white; padding:1rem; border-radius:8px; margin-bottom:1rem; border-left:4px solid ${ans.isCorrect ? 'var(--cf-green)' : 'var(--vermilion)'}">
                        <div style="font-weight:bold; margin-bottom:0.5rem;">${icon} ç¬¬${idx + 1}å•: ${ans.question}</div>
                        <div style="font-size:0.9rem; color:#555; margin-bottom:0.5rem;">ã‚ãªãŸã®å›ç­”: ${ans.selected >= 0 ? ans.options[ans.selected] : 'æœªå›ç­”'} / æ­£è§£: ${ans.options[ans.correct]}</div>
                        <div style="font-size:0.9rem; background:var(--off-white); padding:0.5rem; border-radius:4px;">è§£èª¬: ${ans.explanation}</div>
                    </div>
                `;
                reviewDiv.innerHTML += html;
            });
            window.scrollTo(0, 0);
        }

        function retryExam() {
            document.getElementById('result-section').classList.remove('active');
            document.getElementById('course-intro').classList.remove('hidden');
            window.scrollTo(0, 0);
        }


    </script>
</body>

</html>