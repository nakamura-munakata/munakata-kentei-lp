<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#1a2332">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>å®—åƒæ¤œå®š - è¦³å…‰ç·¨</title>
    <!-- OGP Meta Tags -->
    <meta property="og:title" content="å®—åƒæ¤œå®š è¦³å…‰ç·¨ - ã‚ãªãŸã®å®—åƒæ„›ã‚’è¨¼æ˜ã—ã‚ˆã†">
    <meta property="og:description" content="å®—åƒã®è¦³å…‰åæ‰€ã‚„ã‚°ãƒ«ãƒ¡ã«é–¢ã™ã‚‹çŸ¥è­˜ã‚’è©¦ãã†ï¼å…¨å•æ­£è§£ã§ã€Œè¦³å…‰ãƒã‚¹ã‚¿ãƒ¼ã€ã®ç§°å·ã‚’ã‚²ãƒƒãƒˆï¼">
    <meta property="og:image" content="https://nakamura-munakata.github.io/munakata-kentei-lp/images/ogp_image.png">
    <meta property="og:url" content="https://nakamura-munakata.github.io/munakata-kentei-lp/kanko/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz.css">
    <style>
        /* è¦³å…‰ç·¨ç‹¬è‡ªã®ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
        .spot-section {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px dashed #ddd;
        }

        .spot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .spot-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .spot-img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            background-color: #eee;
        }

        .spot-name {
            padding: 10px;
            font-size: 0.9em;
            font-weight: bold;
            color: var(--navy);
        }
    </style>
</head>

<body>
    <!-- Crowdfunding Banner -->
    <div class="cf-banner">
        <span class="cf-badge">CFå®Ÿæ–½ä¸­</span>
        <span>ã¿ã‚“ãªã§ä½œã‚‹å®—åƒæ¤œå®šï¼æ”¯æ´è€…å‹Ÿé›†ä¸­</span>
        <a href="https://camp-fire.jp/projects/920270/preview?token=3jhx8ucq" target="_blank">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
    </div>

    <!-- Header -->
    <header class="site-header">
        <nav>
            <a href="../index.html" class="logo">
                <img src="../images/logo.png" alt="å®—åƒæ¤œå®šãƒ­ã‚´">
            </a>
            <div class="hamburger" onclick="toggleMenu()" role="button" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html#concept">æ¤œå®šã¨ã¯</a></li>
                <li><a href="../index.html#courses">ã‚³ãƒ¼ã‚¹ç´¹ä»‹</a></li>
                <li><a href="https://camp-fire.jp/projects/920270/preview?token=3jhx8ucq" target="_blank"
                        class="cf-button">æ”¯æ´ã™ã‚‹</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero"
        style="background-image: linear-gradient(rgba(26, 35, 50, 0.55), rgba(26, 35, 50, 0.65)), url('images/kanko_bg.jpg');">
        <div class="hero-content">
            <h1>å®—åƒæ¤œå®š<br>è¦³å…‰ç·¨</h1>
            <p>å®—åƒå¤§ç¤¾ã€æµ·ã®å¹¸ã€çµ¶æ™¯ã‚¹ãƒãƒƒãƒˆâ€¦<br>å®—åƒã®é­…åŠ›ã‚’ã©ã‚Œã ã‘çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</p>
        </div>
    </section>

    <!-- Quiz Container -->
    <div class="quiz-container">
        <div class="container">
            <div class="content">

                <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
                <div id="difficulty-selection">
                    <div class="overview" style="border-left-color: var(--vermilion);">
                        <h2>è¦³å…‰çŸ¥è­˜ã‚’è©¦ãã†ï¼</h2>
                        <p>å®—åƒå¸‚ã«ã¯ä¸–ç•Œéºç”£ã‚’ã¯ã˜ã‚ã€ç¾å‘³ã—ã„ã‚°ãƒ«ãƒ¡ã‚„ç¾ã—ã„è‡ªç„¶ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ã“ã®æ¤œå®šã§ã€ã‚ãªãŸã®ã€Œå®—åƒæ„›ã€ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
                    </div>

                    <div class="difficulty-card beginner" onclick="startExam('kanko')"
                        style="border-color: var(--vermilion); max-width: 500px; margin: 0 auto;">
                        <img src="images/kanko_icon.png" alt="è¦³å…‰" class="difficulty-icon"
                            onerror="this.src='../quiz/images/beginner_icon.png'">
                        <h3>è¦³å…‰ã‚³ãƒ¼ã‚¹</h3>
                        <p class="difficulty-desc">å…¨10å•ï¼ç›®æŒ‡ã›è¦³å…‰ãƒã‚¹ã‚¿ãƒ¼ï¼</p>
                        <ul class="difficulty-info">
                            <li><span class="info-label">å•é¡Œæ•°</span><span class="info-value">10å•</span></li>
                            <li><span class="info-label">å½¢å¼</span><span class="info-value">é¸æŠè‚¢</span></li>
                            <li><span class="info-label">åˆ¶é™æ™‚é–“</span><span class="info-value">ãªã—</span></li>
                        </ul>
                        <button class="cta-button">æ¤œå®šã‚¹ã‚¿ãƒ¼ãƒˆ â†’</button>
                    </div>

                    <!-- ã‚¹ãƒãƒƒãƒˆç´¹ä»‹ï¼ˆè£…é£¾ï¼‰ -->
                    <div class="spot-section">
                        <h3 style="text-align:center; color:#555; font-size:1.1em;">å®—åƒã®é­…åŠ›ã‚¹ãƒãƒƒãƒˆ</h3>
                        <div class="spot-grid">
                            <div class="spot-card">
                                <div class="spot-img" style="background-image: url('images/okitsumiya.jpg');"></div>
                                <!-- ãƒ€ãƒŸãƒ¼ç”»åƒ -->
                                <div class="spot-name">å®—åƒå¤§ç¤¾</div>
                            </div>
                            <div class="spot-card">
                                <div class="spot-img" style="background-image: url('images/oshima.jpg');"></div>
                                <div class="spot-name">å¤§å³¶</div>
                            </div>
                            <div class="spot-card">
                                <div class="spot-img" style="background-image: url('images/michinoeki.jpg');"></div>
                                <div class="spot-name">é“ã®é§…ã‚€ãªã‹ãŸ</div>
                            </div>
                            <div class="spot-card">
                                <div class="spot-img" style="background-image: url('images/beach.jpg');"></div>
                                <div class="spot-name">ã•ã¤ãæ¾åŸ</div>
                            </div>
                        </div>
                    </div>

                    <!-- æ³¢ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
                    <div class="wave-decoration"></div>
                </div>

                <!-- è¦³å…‰ã‚¯ã‚¤ã‚ºæœ¬ç•ª -->
                <div id="kanko-exam" class="exam-section">
                    <h2>è¦³å…‰ã‚³ãƒ¼ã‚¹</h2>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="kanko-progress" class="progress-fill"
                                style="background: linear-gradient(90deg, var(--vermilion), #ff7043);"></div>
                        </div>
                    </div>
                    <div id="kanko-questions"></div>
                    <div class="button-group">
                        <button class="btn" onclick="submitAnswers('kanko')">æ¡ç‚¹ã™ã‚‹</button>
                        <button class="btn" onclick="backToTop()" style="background: #6c757d;">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
                    </div>
                </div>

                <!-- çµæœè¡¨ç¤º -->
                <div id="result-section">
                    <div class="result-header">
                        <div class="result-message" id="result-message"></div>
                        <div class="result-score" id="result-score">0ç‚¹</div>
                        <div class="result-rank" id="result-rank"></div>
                        <div class="user-count" id="result-user-count"></div>
                    </div>

                    <!-- ãƒ‡ã‚¸ã‚¿ãƒ«èªå®šè¨¼ -->
                    <div class="certificate-section" id="certificate-section" style="display: none;">
                        <h3>ğŸ–ï¸ ãƒ‡ã‚¸ã‚¿ãƒ«èªå®šè¨¼</h3>
                        <div class="certificate-card" id="certificate-card">
                            <div class="certificate-badge" id="certificate-badge">âœˆï¸</div>
                            <div class="certificate-title">å®—åƒæ¤œå®š è¦³å…‰ç·¨</div>
                            <div class="certificate-level" id="certificate-level">è¦³å…‰ãƒã‚¹ã‚¿ãƒ¼</div>
                            <div class="certificate-score" id="certificate-score-display">åˆæ ¼</div>
                            <div class="certificate-date" id="certificate-date"></div>
                        </div>
                        <div class="certificate-actions">
                            <button class="certificate-btn" onclick="downloadCertificate()">ğŸ“¥ èªå®šè¨¼ã‚’ä¿å­˜</button>
                            <button class="certificate-btn" onclick="shareCertificate()">ğŸ“¤ SNSã§ã‚·ã‚§ã‚¢</button>
                        </div>
                    </div>

                    <!-- æ¬¡ã®ã‚³ãƒ¼ã‚¹ã¸ã®èª˜å°ï¼ˆLPã¸ï¼‰ -->
                    <div class="next-course-banner ambassador" id="next-course-banner" style="display: none;">
                        <h3 id="next-course-title">ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h3>
                        <p id="next-course-desc">å®—åƒã®è¦³å…‰çŸ¥è­˜ã¯ãƒãƒƒãƒãƒªã§ã™ã­ï¼<br>å®Ÿéš›ã«å®—åƒã‚’è¨ªã‚Œã¦ã€é­…åŠ›ã‚’ä½“æ„Ÿã—ã¦ãã ã•ã„ã€‚</p>
                        <button class="next-course-btn"
                            onclick="window.open('https://munakata-kankou.com/', '_blank')">å®—åƒè¦³å…‰ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹</button>
                    </div>

                    <!-- SNSã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ -->
                    <div class="share-buttons">
                        <button class="share-btn" onclick="shareOnTwitter()">ğ•ã§ã‚·ã‚§ã‚¢</button>
                        <button class="share-btn" onclick="shareOnFacebook()">Facebookã§ã‚·ã‚§ã‚¢</button>
                        <button class="share-btn" onclick="shareOnLine()">LINEã§ã‚·ã‚§ã‚¢</button>
                        <button class="share-btn" onclick="copyLink()">ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</button>
                    </div>

                    <div class="answer-review">
                        <h3>ğŸ“„ å›ç­”ç¢ºèª</h3>
                        <div id="answer-review-content"></div>
                    </div>

                    <!-- LPèª˜å° -->
                    <div class="lp-links">
                        <div class="lp-banner">
                            <p>å®—åƒæ¤œå®šã«ã¤ã„ã¦ã‚‚ã£ã¨çŸ¥ã‚‹</p>
                            <a href="../index.html">æ¤œå®šå…¬å¼ã‚µã‚¤ãƒˆã¸</a>
                        </div>
                        <div class="lp-link-grid">
                            <a href="../quiz/index.html" class="lp-link-item">é€šå¸¸æ¤œå®šã«æŒ‘æˆ¦</a>
                            <a href="https://camp-fire.jp/projects/920270/preview?token=3jhx8ucq" target="_blank"
                                class="lp-link-item" style="color:var(--cf-green-dark);border-color:var(--cf-green);">
                                æ”¯æ´ã™ã‚‹ (CF)
                            </a>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn" onclick="retryExam()">ã‚‚ã†ä¸€åº¦å—é¨“ã™ã‚‹</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 å®—åƒæ¤œå®šå®Ÿè¡Œå§”å“¡ä¼š</p>
        <p>å”åŠ›ï¼šå®—åƒå¸‚ã€å®—åƒè¦³å…‰å”ä¼š</p>
    </footer>

    <script>
        // è¦³å…‰ç·¨ã®è³ªå•ãƒ‡ãƒ¼ã‚¿
        const allQuestions = {
            "kanko": [
                { "id": "q1", "question": "å®—åƒå¤§ç¤¾ã®è¾ºæ´¥å®®ã«ã‚ã‚‹ã€Œç¥å®é¤¨ã€ã«ã¯ä½•ãŒå±•ç¤ºã•ã‚Œã¦ã„ã‚‹ï¼Ÿ", "options": ["ä»åƒã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³", "æ²–ãƒå³¶ã®å›½å®ãƒ»å‡ºåœŸå“", "å¤ä»£ã®æ­¦å™¨", "æ±Ÿæˆ¸æ™‚ä»£ã®çµµç”»"], "correct": 1, "explanation": "ç¥å®é¤¨ã«ã¯æ²–ãƒå³¶ã‹ã‚‰å‡ºåœŸã—ãŸç´„8ä¸‡ç‚¹ã®å›½å®ãŒåè”µãƒ»å±•ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œæµ·ã®æ­£å€‰é™¢ã€ã¨å‘¼ã°ã‚Œã‚‹è²´é‡ãªéºç‰©ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚" },
                { "id": "q2", "question": "ä¹å·æœ€å¤§ç´šã®å£²ä¸Šã‚’èª‡ã‚‹é“ã®é§…ã€Œé“ã®é§…ã‚€ãªã‹ãŸã€ã€‚ç‰¹ã«äººæ°—ãªã®ã¯ï¼Ÿ", "options": ["æ–°é®®ãªé­šä»‹é¡", "åœ°å…ƒã®é‡èœ", "å®—åƒç‰›", "ã“ã‚Œã‚‰ã™ã¹ã¦"], "correct": 3, "explanation": "é“ã®é§…ã‚€ãªã‹ãŸã¯ã€é˜å´æ¼æ¸¯ãªã©ã§æ°´æšã’ã•ã‚ŒãŸæ–°é®®ãªé­šä»‹é¡ã‚’ã¯ã˜ã‚ã€åœ°å…ƒã®é‡èœã‚„å®—åƒç‰›ãªã©ã€è±Šã‹ãªé£Ÿã®å®åº«ã¨ã—ã¦å¤§äººæ°—ã§ã™ã€‚" },
                { "id": "q3", "question": "ã€Œç¥å®¿ã‚‹å³¶ã€ã¨ã—ã¦ä¸–ç•Œéºç”£ã«ç™»éŒ²ã•ã‚ŒãŸæ²–ãƒå³¶ã€‚ã“ã®å³¶ã¯ç¾åœ¨ã€ç‰¹å®šã®è¨±å¯ã•ã‚ŒãŸäººä»¥å¤–ã¯ä¸Šé™¸ã§ãã¾ã›ã‚“ãŒã€ãã®ç†ç”±ã¯ï¼Ÿ", "options": ["è‡ªç„¶ä¿è­·ã®ãŸã‚", "ç¥åŸŸã¨ã—ã¦å³é‡ã«å®ˆã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚", "è»äº‹æ–½è¨­ãŒã‚ã‚‹ãŸã‚", "æ‰€æœ‰è€…ãŒä¸æ˜ãªãŸã‚"], "correct": 1, "explanation": "æ²–ãƒå³¶ã¯å³¶å…¨ä½“ãŒå¾¡ç¥ä½“ã¨ã•ã‚Œã€å¤ä»£ã‹ã‚‰å³æ ¼ãªç¦å¿Œã«ã‚ˆã£ã¦å®ˆã‚‰ã‚Œã¦ããŸç¥åŸŸã§ã™ã€‚ä¸€èˆ¬ã®ç«‹å…¥ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q4", "question": "å®—åƒãƒ»å¤§å³¶ã«ã‚ã‚‹ã€Œä¸­æ´¥å®®ã€ã®ä¸ƒå¤•ä¼èª¬ã«é–¢é€£ã—ã¦ã€å³¶å†…ã‚’æµã‚Œã‚‹å·ã®åå‰ã¯ï¼Ÿ", "options": ["å¤©ã®å·", "æ˜Ÿã®å·", "æ‹ã®å·", "éŠ€æ²³"], "correct": 0, "explanation": "å¤§å³¶ã«ã¯ã€Œå¤©ã®å·ã€ã¨ã„ã†å·ãŒæµã‚Œã¦ãŠã‚Šã€ç‰½ç‰›ç¥ç¤¾ã¨ç¹”å¥³ç¥ç¤¾ãŒå·ã‚’æŒŸã‚“ã§ç¥€ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ä¸ƒå¤•ä¼èª¬ç™ºç¥¥ã®åœ°ã®ä¸€ã¤ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q5", "question": "å®—åƒã‚¨ãƒªã‚¢ã§å†¬ã«æ—¬ã‚’è¿ãˆã‚‹ã€é«˜ç´šé­šã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹é­šã¯ï¼Ÿ", "options": ["ãƒ•ã‚°ï¼ˆãµãï¼‰", "ã‚¿ã‚¤", "ãƒ’ãƒ©ãƒ¡", "ã‚¢ãƒŠã‚´"], "correct": 0, "explanation": "å®—åƒã¯å¤©ç„¶ãƒ•ã‚°ã®æ°´æšã’ãŒç››ã‚“ã§ã€é˜å´æ¼æ¸¯ã¯çœŒå†…æœ‰æ•°ã®ç”£åœ°ã§ã™ã€‚ã€Œå®—åƒã®ãµãã€ã¨ã—ã¦ãƒ–ãƒ©ãƒ³ãƒ‰åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q6", "question": "ç¾ã—ã„æ¾æ—ãŒç¶šãã€Œã•ã¤ãæ¾åŸã€ã€‚ã‹ã¤ã¦èª°ãŒæ¤æ—ã‚’å‘½ã˜ãŸã¨ã•ã‚Œã¦ã„ã‚‹ï¼Ÿ", "options": ["é»’ç”°é•·æ”¿", "è±Šè‡£ç§€å‰", "å¾³å·å®¶åº·", "å¹³æ¸…ç››"], "correct": 0, "explanation": "æ±Ÿæˆ¸æ™‚ä»£åˆæœŸã€ç¦å²¡è—©ä¸»ã®é»’ç”°é•·æ”¿ãŒé˜²é¢¨æ—ã¨ã—ã¦æ¤æ—ã‚’å‘½ã˜ãŸã¨ä¼ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚" },
                { "id": "q7", "question": "å®—åƒãƒ¦ãƒªãƒƒã‚¯ã‚¹ã«ã‚ã‚‹æ¸©æ³‰æ–½è¨­ã€Œã‚†ã€œã‚†ã€œãƒ—ãƒ¼ãƒ«ã€ã‚„æ¸©æ³‰é¤¨ã€‚ã“ã®ã€Œãƒ¦ãƒªãƒƒã‚¯ã‚¹ã€ã®åå‰ã®ç”±æ¥ã¯ï¼Ÿ", "options": ["ãƒ¦ãƒªã¨ã‚¯ã‚¹ãƒã‚­", "ãƒ¦ãƒ¼ãƒˆãƒ”ã‚¢ã¨ãƒªãƒ©ãƒƒã‚¯ã‚¹", "ãƒ¦ãƒ‹ãƒ¼ã‚¯ã¨ãƒŸãƒƒã‚¯ã‚¹", "å¤•æ—¥ã¨ãƒªãƒ©ãƒƒã‚¯ã‚¹"], "correct": 0, "explanation": "å®—åƒå¸‚ã®å¸‚ã®èŠ±ã€Œãƒ¦ãƒªã€ã¨å¸‚ã®æœ¨ã€Œã‚¯ã‚¹ãƒã‚­ã€ã‚’çµ„ã¿åˆã‚ã›ã¦ã€Œãƒ¦ãƒªãƒƒã‚¯ã‚¹ã€ã¨åä»˜ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚" },
                { "id": "q8", "question": "æ¯å¹´ç§‹ã«é–‹å‚¬ã•ã‚Œã‚‹ã€è¥¿æ—¥æœ¬æœ€å¤§ç´šã®æµ·ä¸Šç¥äº‹ã¨ã„ãˆã°ï¼Ÿ", "options": ["ã¿ã‚ã‚Œç¥­", "åšå¤šã©ã‚“ãŸã", "å±±ç¬ ", "æ”¾ç”Ÿä¼š"], "correct": 0, "explanation": "ç§‹å­£å¤§ç¥­ã®å¹•é–‹ã‘ã‚’é£¾ã‚‹ã€Œã¿ã‚ã‚Œç¥­ã€ã§ã¯ã€æ•°ç™¾éš»ã®æ¼èˆ¹ãŒå¤§å³¶ã‹ã‚‰ç¥æ¹Šã¾ã§ãƒ‘ãƒ¬ãƒ¼ãƒ‰ã—ã€ä¸‰å¥³ç¥ã®å†ä¼šã‚’ç¥ã„ã¾ã™ã€‚" },
                { "id": "q9", "question": "å®—åƒå¸‚ã«ã‚ã‚‹ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«äººæã‚’è‚²æˆã™ã‚‹ãŸã‚ã®å¤§å­¦ã¯ï¼Ÿ", "options": ["æ—¥æœ¬èµ¤åå­—ä¹å·å›½éš›çœ‹è­·å¤§å­¦", "ç¦å²¡æ•™è‚²å¤§å­¦", "ä¹å·å¤§å­¦ï¼ˆå®—åƒã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ï¼‰", "ä¸Šè¨˜ã®ã†ã¡çœ‹è­·å¤§å­¦ã¨æ•™è‚²å¤§å­¦ãŒã‚ã‚‹"], "correct": 3, "explanation": "å®—åƒå¸‚ã«ã¯æ—¥æœ¬èµ¤åå­—ä¹å·å›½éš›çœ‹è­·å¤§å­¦ã¨ç¦å²¡æ•™è‚²å¤§å­¦ãŒã‚ã‚Šã€å­¦åœ’éƒ½å¸‚ã¨ã—ã¦ã®å´é¢ã‚‚æŒã£ã¦ã„ã¾ã™ã€‚" },
                { "id": "q10", "question": "å®—åƒå¤§ç¤¾ã«äº¤é€šå®‰å…¨ç¥ˆé¡˜ã§è¨ªã‚Œã‚‹äººãŒå¤šã„ç†ç”±ã¯ï¼Ÿ", "options": ["äº¤é€šå®‰å…¨ã®ãŠå®ˆã‚ŠãŒç™ºç¥¥ã ã‹ã‚‰", "é§è»Šå ´ãŒåºƒã„ã‹ã‚‰", "ãƒ‰ãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ã‚¹ã«è¿‘ã„ã‹ã‚‰", "æ˜”ã‹ã‚‰é¦¬è»ŠãŒé€šã£ã¦ã„ãŸã‹ã‚‰"], "correct": 0, "explanation": "å®—åƒå¤§ç¤¾ã¯äº¤é€šå®‰å…¨å®ˆã‚Šç™ºç¥¥ã®ç¥ç¤¾ã¨ã„ã‚ã‚Œã¦ãŠã‚Šã€è»Šã«è£…ç€ã™ã‚‹ãŠå®ˆã‚Šã‚’æ—¥æœ¬ã§åˆã‚ã¦æˆä¸ã—å§‹ã‚ãŸã“ã¨ã§æœ‰åã§ã™ã€‚" }
            ]
        };

        let currentScore = 0;

        function startExam(difficulty) {
            document.getElementById('difficulty-selection').hidden = true;
            document.getElementById('difficulty-selection').style.display = 'none'; // Ensure hidden
            document.getElementById('kanko-exam').classList.add('active');
            renderQuestions();
        }

        function renderQuestions() {
            const questions = allQuestions['kanko'];
            const container = document.getElementById('kanko-questions');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const questionHTML = `
                <div class="question-item" id="${q.id}">
                    <div class="question-number">ç¬¬${idx + 1}å• / å…¨${questions.length}å•</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, optIdx) => `
                            <label class="option">
                                <input type="radio" name="${q.id}" value="${optIdx}" onchange="updateProgress()">
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
                container.innerHTML += questionHTML;
            });
        }

        function updateProgress() {
            const questions = allQuestions['kanko'];
            const answered = questions.filter(q => {
                return document.querySelector(`input[name="${q.id}"]:checked`);
            }).length;
            const progress = (answered / questions.length) * 100;
            document.getElementById('kanko-progress').style.width = progress + '%';
        }

        function submitAnswers(difficulty) {
            const questions = allQuestions['kanko'];
            let score = 0;
            let answers = {};

            questions.forEach(q => {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`);
                if (selected) {
                    const answer = parseInt(selected.value);
                    answers[q.id] = {
                        selected: answer,
                        correct: q.correct,
                        isCorrect: answer === q.correct,
                        question: q.question,
                        options: q.options,
                        explanation: q.explanation
                    };
                    if (answer === q.correct) {
                        score += 10;
                    }
                } else {
                    answers[q.id] = {
                        selected: -1,
                        correct: q.correct,
                        isCorrect: false,
                        question: q.question,
                        options: q.options,
                        explanation: q.explanation
                    };
                }
            });

            currentScore = score;
            displayResults(score, answers);
        }

        function displayResults(score, answers) {
            const userCount = incrementUserCount();
            
            document.getElementById('kanko-exam').classList.remove('active');
            document.getElementById('result-section').classList.add('active');

            document.getElementById('result-score').textContent = score + 'ç‚¹';

            let message = '';
            let rank = '';
            const isPassed = score >= 80; // è¦³å…‰ç·¨ã¯80ç‚¹ä»¥ä¸Šã§åˆæ ¼ã¨ã™ã‚‹

            if (score >= 90) {
                message = '<span class="result-icon-s success">â˜…</span> å®—åƒè¦³å…‰ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ï¼';
                rank = 'ç§°å·: è¦³å…‰ãƒã‚¹ã‚¿ãƒ¼';
            } else if (score >= 70) {
                message = '<span class="result-icon-s good">âœ“</span> ã‹ãªã‚Šã®å®—åƒé€šã§ã™ï¼';
                rank = 'ç§°å·: è¦³å…‰ã‚µãƒãƒ¼ã‚¿ãƒ¼';
            } else {
                message = '<span class="result-icon-s retry">!</span> ã¾ã ã¾ã çŸ¥ã‚‰ã‚Œã–ã‚‹é­…åŠ›ãŒã‚ã‚Šã¾ã™ï¼';
                rank = 'è©•ä¾¡: è¦³å…‰ãƒ“ã‚®ãƒŠãƒ¼';
            }

            document.getElementById('result-message').innerHTML = message;
            document.getElementById('result-rank').textContent = rank;
            document.getElementById('result-user-count').textContent = `ã‚ãªãŸã¯${userCount}äººç›®ã®æŒ‘æˆ¦è€…ã§ã™ï¼`;

            // åˆæ ¼æ™‚ã®ã¿èªå®šè¨¼ã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            if (isPassed || score >= 60) { // 60ç‚¹ä»¥ä¸Šã§èªå®šè¨¼è¡¨ç¤º
                showCertificate(score);
                document.getElementById('next-course-banner').style.display = 'block';
            } else {
                document.getElementById('certificate-section').style.display = 'none';
                document.getElementById('next-course-banner').style.display = 'none';
            }

            displayAnswerReview(answers);

            // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                document.getElementById('result-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
        }

        function showCertificate(score) {
            const level = score >= 90 ? 'è¦³å…‰ãƒã‚¹ã‚¿ãƒ¼' : 'è¦³å…‰ã‚µãƒãƒ¼ã‚¿ãƒ¼';
            const badgeImage = 'images/kanko_icon.png'; // å…±é€šã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨

            document.getElementById('certificate-section').style.display = 'block';
            document.getElementById('certificate-level').textContent = level;
            document.getElementById('certificate-score-display').textContent = score + 'ç‚¹';
            
            // Image badge
            const badgeContainer = document.getElementById('certificate-badge');
            // ãƒ€ãƒŸãƒ¼ç”»åƒãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
            badgeContainer.innerHTML = `<img src="${badgeImage}" alt="Badge" style="width:100%; height:100%; object-fit:contain; border-radius:12px;" onerror="this.src='../quiz/images/beginner_icon.png'">`;

            const today = new Date();
            document.getElementById('certificate-date').textContent =
                `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥ èªå®š`;
        }

        function displayAnswerReview(answers) {
            const reviewContent = document.getElementById('answer-review-content');
            reviewContent.innerHTML = '';

            let questionIndex = 1;
            Object.values(answers).forEach((answer) => {
                const itemClass = answer.isCorrect ? 'correct' : 'incorrect';
                const icon = answer.isCorrect ? '<span class="review-icon correct">âœ“</span>' : '<span class="review-icon incorrect">Ã—</span>';
                const selectedText = answer.selected >= 0 ? answer.options[answer.selected] : 'æœªå›ç­”';
                const correctText = answer.options[answer.correct];

                const html = `
                <div class="answer-item ${itemClass}">
                    <div class="answer-item-icon">${icon}</div>
                    <div class="answer-item-title">ç¬¬${questionIndex}å•: ${answer.question}</div>

                    <div class="answer-item-content">
                        <strong>ã‚ãªãŸã®å›ç­”:</strong> ${selectedText}
                    </div>
                    ${!answer.isCorrect ? `<div class="answer-item-content" style="color:var(--vermilion);"><strong>æ­£è§£:</strong> ${correctText}</div>` : ''}
                    <div class="answer-item-explanation">
                        <strong>è§£èª¬:</strong> ${answer.explanation}
                    </div>
                </div>
                `;
                reviewContent.innerHTML += html;
                questionIndex++;
            });
        }
        
        // SNS Share functions
        function shareOnTwitter() {
            const text = `å®—åƒæ¤œå®šã€è¦³å…‰ç·¨ã€‘ã«æŒ‘æˆ¦ã—ã¾ã—ãŸï¼\nçµæœ: ${document.getElementById('result-rank').textContent}\nã‚¹ã‚³ã‚¢: ${currentScore}ç‚¹\n#å®—åƒæ¤œå®š #å®—åƒè¦³å…‰`;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
        }

        function shareOnFacebook() {
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
        }

        function shareOnLine() {
            window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(window.location.href)}`, '_blank');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            });
        }

        // Keep track of user count (mock)
        function incrementUserCount() {
            let count = localStorage.getItem('kankoUserCount') || 120;
            count = parseInt(count) + 1;
            localStorage.setItem('kankoUserCount', count);
            return count;
        }

        function backToTop() {
            document.getElementById('kanko-exam').classList.remove('active');
            document.getElementById('difficulty-selection').hidden = false;
            document.getElementById('difficulty-selection').style.display = 'grid';
        }

        function retryExam() {
            document.getElementById('result-section').classList.remove('active');
            document.getElementById('difficulty-selection').hidden = false;
            document.getElementById('difficulty-selection').style.display = 'grid';
        }

        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }
    </script>
</body>

</html>